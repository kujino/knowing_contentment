<div class="bg-[#F4F4F4] min-h-screen">
  <div class="max-w-xl mx-auto pt-5">
    <div class="my-8 p-7 bg-gradient-to-b from-[#FFF9EC] to-white border border-[#F6E2B3] rounded-2xl shadow-md">
      <div class="text-center mb-6">
        <div class="text-sm tracking-widest text-[#A8731E] font-medium mb-1">
          今日の教え
        </div>
        <h2 class="mt-3 text-3xl font-semibold text-[#E3A83A] tracking-wide">
          <%= @today_theme.title %>
        </h2>
        <div class="w-20 h-[2px] bg-[#E3A83A] mx-auto mt-3 rounded-full"></div>
      </div>
      <p class="whitespace-pre-line text-[#2F3A4A] font-medium leading-relaxed text-sl tracking-wide">
        <%= @today_theme.description %>
      </p>
    </div>
    <div class="mt-10">
      <%= render "shared/error_messages", object: @post %>
      <%= form_with model: @post do |f| %>
        <%= f.text_area :content, require: true, placeholder: "教えにあてはまる内容を書いてください",
        class: "w-full min-h-[200px] px-4 py-3 bg-white border border-gray-300 rounded-lg shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-300 focus:border-[#2F3A4A] tresize-vertical"
        %>

        <div class="mt-4">
          <%= f.label :image, "画像", class: "block text-gray-700 font-medium mb-2" %>

          <div class="flex items-center border border-gray-300 rounded-md overflow-hidden">

            <label class="bg-white px-4 py-2 text-sm text-gray-700 border-r border-gray-300 cursor-pointer hover:bg-gray-200">
            ファイルを選択
              <%= f.file_field :image,
              accept: Post::ACCEPTED_CONTENT_TYPES.join(","),
              class: "hidden",
              id: "image-upload" %>
            </label>

            <!-- ファイル名表示部分 -->
              <span id="file-name" class="flex-1 px-3 py-2 text-gray-600 text-sm">
                選択されていません
              </span>
           </div>
          </div>

          <script>
            document.getElementById("image-upload").addEventListener("change", function(e) {
            const fileName = e.target.files.length > 0 ? e.target.files[0].name : "選択されていません";
            document.getElementById("file-name").textContent = fileName;
            });
          </script>

        <div class="flex items-center space-x-2 pt-10">
          <%= f.check_box :is_anonymous, { class: "scale-140 translate-y-[1.5px] cursor-pointer" }, false, true %>
          <%= f.label :is_anonymous, "チェックでタイムラインにユーザー名を表示（デフォルトは匿名）", class: "text-gray-800 cursor-pointer select-none" %>
        </div>

        <%= f.hidden_field :theme_id, value: @today_theme.id %>
      
        <div class="flex justify-center pt-15">
          <%= f.submit "送信",
            class: "bg-[#E3A83A] text-white font-medium py-2 px-10 rounded-none shadow-sm hover:bg-[#cc972f] transition" %>
        </div>
      <% end %>
    <div>
  </div>
</div>