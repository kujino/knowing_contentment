<% content_for(:title, t('.title')) %>
<div class="bg-[#F4F4F4] min-h-screen px-5 md:px-0 max-w-[480px] md:max-w-7xl">
  <div class="max-w-xl mx-auto pt-10">

    <div class="relative p-7 bg-gradient-to-b from-[#FFF9EC] to-white border border-[#F6E2B3] rounded-2xl shadow-md">
      
    <% if user_signed_in? %>
      <div class="absolute bottom-4 left-4">
        <%= render 'posts/reaction_buttons', post: @post %>
      </div>
    <% end %>


      <% if  @post.user == current_user %>
        <div class="absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2">
          <%= link_to edit_post_path(@post), class: "opacity-40 hover:opacity-100 transition" do %>
            <%= image_tag "pencil_icon.svg", class: "w-5 h-6" %>
          <% end %>

          <%= link_to post_path(@post),
            data: { turbo_method: :delete, turbo_confirm: t('.delete_it?') },
            class: "opacity-40 hover:opacity-100 transition" do %>
            <%= image_tag "trash_icon.svg", class: "w-5 h-6" %>
          <% end %>
        </div>
      <% end %> 

      <!-- 本文 -->
      <div class="text-center mb-6">

        <h2 class="mt-3 text-3xl font-semibold text-[#E3A83A] tracking-wide">
          <%= @post.theme.title %>
        </h2>

        <div class="w-20 h-[2px] bg-[#E3A83A] mx-auto mt-3 rounded-full"></div>

        <% if @post.image.attached? %>
          <div class="flex justify-center mt-5">
            <%= image_tag @post.image.variant(resize_to_fill: [500, 300]) %>
          </div>
        <% end %>

        <div class="<%= @post.image.attached? ? 'mt-10' : 'mt-6' %> text-left whitespace-pre-line">
          <%= @post.content %>
        </div>

        <div class="mt-4 text-xs text-gray-500 text-right">
          <%= l(@post.created_at, format: :long) %>
        </div>

      </div>
    </div>
    <div class="pt-10">
      <%= render 'shared/theme', post: @post %>
    </div>

    <div class="flex justify-center mt-10 space-x-4">
      <%= link_to t('.to_back'), request.referer || posts_path, class: "bg-[#E3A83A] text-white font-medium py-2 px-6 rounded-none shadow-sm hover:bg-[#cc972f] transition" %>
    </div>
  </div>
</div>