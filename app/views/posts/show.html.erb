<% content_for(:title, t('.title')) %>

<div class="bg-white min-h-screen w-full">
  <div class="mx-auto px-5 md:px-0 max-w-[480px] md:max-w-7xl">
    <div class="max-w-xl mx-auto pt-10 pb-10">

          <% if @post.image.attached? %>
            <div class="flex justify-center">
              <%= image_tag @post.image.variant(resize_to_fill: [500, 300]), class: "w-full h-auto block shadow-sm rounded-md" %>
            </div>
          <% else %>
            <div class="flex justify-center">
              <%= image_tag "buddhalog_post3.png", class:"w-full h-auto block shadow-sm rounded-md" %>
            </div>
          <% end %>

          <div class="mt-10 text-center text-sm md:text-base text-gray-600">
            みつけた仏教：
            <span class="font-medium text-[#E3A83A]">
              <%= @post.theme.title %>
            </span>
          </div>

          <div class="text-base text-left whitespace-pre-line pb-8 mt-5">
              <%= @post.content %>
          </div>

          <div class="mt-3 mb-1 text-xs text-gray-500 text-right">
                  <% if @post.is_anonymous == false %>
                    <span class="mr-2 font-medium text-gray-700">
                      <%= @post.user.name %>
                    </span>
                  <% end %>
          </div>
          <div class="mt-3 mb-1 text-xs text-gray-500 text-right">
            <%= l(@post.created_at, format: :long) %>
          </div>

          <div class="border-t border-gray-300"></div>

          <div class="mt-3 flex items-center justify-between text-gray-500">
            <% if user_signed_in? %>
              <%= render 'posts/reaction_buttons', post: @post %>
            <% end %>

            <% if @post.user == current_user %>
              <div class="flex space-x-4">
                <%= link_to edit_post_path(@post),
                  class: "opacity-50 hover:opacity-100 transition" do %>
                    <%= image_tag "edit_pencil.png", class: "w-5 h-5" %>
                <% end %>

                <%= link_to post_path(@post),
                  data: { turbo_method: :delete, turbo_confirm: t('.delete_it?') },
                  class: "opacity-50 hover:opacity-100 transition" do %>
                    <%= image_tag "trash.png", class: "w-5 h-5" %>
                <% end %>
              </div>
            <% end %>
          </div>


        <div x-data="{ open: false }" class="mt-10">
          <button
            @click="open = !open"
            class="text-sm md:text-base text-gray-600 hover:text-[#E3A83A] transition"
          >
            投稿のお題を見る ▼
          </button>

          <div x-show="open" x-transition class="mt-2 bg-white py-6 px-6 rounded-lg border border-gray-600">
            <%= render 'shared/theme', post: @post %>
          </div>
        </div>

      <% if user_signed_in? %>
        <div class="flex justify-center mt-10 space-x-6">

          <%= link_to t('.to_mypage'), mypage_path,
            class: "text-[#2F3A4A] text-sl font-medium 
                    pb-[2px] border-b border-transparent 
                    hover:border-[#E9B25A] transition" %>

          <%= link_to t('.to_index'), posts_path,
            class: "text-[#2F3A4A] text-sl font-medium 
                    pb-[2px] border-b border-transparent 
                    hover:border-[#E9B25A] transition" %>

        </div>
    </div>

        <% else %>
          <div class="flex justify-center mt-10 space-x-4">
            <%= link_to t('.to_index'), posts_path, 
                class: "text-[#2F3A4A] text-sl font-medium 
                        pb-[2px] border-b border-transparent 
                        hover:border-[#E9B25A] transition" %>
          </div>
        <% end %>

    </div>
  </div>
</div>
